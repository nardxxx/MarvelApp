"use strict";(self.webpackChunkmarvel=self.webpackChunkmarvel||[]).push([[666],{3834:function(e,n,s){s.r(n),s.d(n,{default:function(){return F}});var a=s(885),r=s(2791),c=s(4270),t=s(4482),i=s(3394),l=s(2373),o=s(184);var h=function(e){var n=e.char,s=n.name,a=n.description,r=n.thumbnail,c=n.homepage,t=n.wiki,i=n.styles;return(0,o.jsxs)("div",{className:"randomchar__block",children:[(0,o.jsx)("img",{src:r,style:i,alt:"Random character",className:"randomchar__img"}),(0,o.jsxs)("div",{className:"randomchar__info",children:[(0,o.jsx)("p",{className:"randomchar__name",children:s}),(0,o.jsx)("p",{className:"randomchar__descr",children:a}),(0,o.jsxs)("div",{className:"randomchar__btns",children:[(0,o.jsx)("a",{href:c,className:"button button__main",children:(0,o.jsx)("div",{className:"inner",children:"homepage"})}),(0,o.jsx)("a",{href:t,className:"button button__secondary",children:(0,o.jsx)("div",{className:"inner",children:"Wiki"})})]})]})]})},d=function(){var e=(0,r.useState)({}),n=(0,a.Z)(e,2),s=n[0],c=n[1],d=(0,t.Z)(),u=d.loading,m=d.error,_=d.getCharacter,j=d.clearError;(0,r.useEffect)((function(){f()}),[]);var x=function(e){c(e)},f=function(){j();var e=Math.floor(400*Math.random()+1011e3);_(e).then(x)},v=m?(0,o.jsx)(l.Z,{}):null,N=u?(0,o.jsx)(i.Z,{}):null,p=u||m?null:(0,o.jsx)(h,{char:s});return(0,o.jsxs)("div",{className:"randomchar",children:[v,N,p,(0,o.jsxs)("div",{className:"randomchar__static",children:[(0,o.jsxs)("p",{className:"randomchar__title",children:["Random character for today!",(0,o.jsx)("br",{}),"Do you want to get to know him better?"]}),(0,o.jsx)("p",{className:"randomchar__title",children:"Or choose another one"}),(0,o.jsx)("button",{className:"button button__main",children:(0,o.jsx)("div",{className:"inner",onClick:f,children:"try it"})})]})]})},u=s(2982),m=s(9295),_=s(5660),j=function(e){var n=(0,r.useState)([]),s=(0,a.Z)(n,2),c=s[0],h=s[1],d=(0,r.useState)(!1),j=(0,a.Z)(d,2),x=j[0],f=j[1],v=(0,r.useState)(210),N=(0,a.Z)(v,2),p=N[0],b=N[1],g=(0,r.useState)(!1),Z=(0,a.Z)(g,2),k=Z[0],y=Z[1],C=(0,r.useState)(null),S=(0,a.Z)(C,2),w=(S[0],S[1]),E=(0,t.Z)(),F=E.loading,I=E.error,R=E.getAllCharacters;(0,r.useEffect)((function(){return T(p,!0)}),[]);var T=function(e,n){f(!n),R(e).then(L).then()},L=function(e){var n=!1;e.length<9&&(n=!0),h((function(n){return[].concat((0,u.Z)(c),(0,u.Z)(e))})),f(!1),b((function(e){return e+9})),y((function(e){return n}))},M=(0,r.useRef)([]),q=function(e){M.current.forEach((function(e){return e.classList.remove("char__item_selected")})),M.current[e].classList.add("char__item_selected"),M.current[e].focus()};var A=function(n){var s=0,a=n.map((function(n,a){var r={objectFit:"cover"};return"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===n.thumbnail&&(r={objectFit:"unset"}),s>=900?s=100:s+=100,(0,o.jsx)(m.Z,{timeout:100,classNames:"char__item",children:(0,o.jsxs)("li",{style:{transition:"opacity 500ms ease ".concat(s,"ms, transform 0.3s ease")},className:"char__item",ref:function(e){return M.current[a]=e},tabIndex:a+1,onClick:function(){e.onCharSelected(n.id),q(a),w(n.id)},onKeyPress:function(s){" "!=s.key&&"Enter"!=s.key||(e.onCharSelected(n.id),q(a),w(n.id))},children:[(0,o.jsx)("img",{src:n.thumbnail,alt:n.name,style:r}),(0,o.jsx)("div",{className:"char__name",children:n.name})]},n.id)})}));return(0,o.jsx)(_.Z,{className:"char__grid",component:"ul",children:a})}(c),B=I?(0,o.jsx)(l.Z,{}):null,U=F&&!x?(0,o.jsx)(i.Z,{}):null;return(0,o.jsxs)("div",{className:"char__list",children:[B,U,A,(0,o.jsx)("button",{className:"button button__main button__long",disabled:x,style:{display:k?"none":"block"},onClick:function(){return T(p)},children:(0,o.jsx)("div",{className:"inner",children:x?(0,o.jsx)(i.Z,{width:"100%",height:"18px"}):"load more"})})]})},x=function(){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{className:"char__select",children:"Please select a character to see information"}),(0,o.jsxs)("div",{className:"skeleton",children:[(0,o.jsxs)("div",{className:"pulse skeleton__header",children:[(0,o.jsx)("div",{className:"pulse skeleton__circle"}),(0,o.jsx)("div",{className:"pulse skeleton__mini"})]}),(0,o.jsx)("div",{className:"pulse skeleton__block"}),(0,o.jsx)("div",{className:"pulse skeleton__block"}),(0,o.jsx)("div",{className:"pulse skeleton__block"})]})]})},f=s(3504);var v=function(e){for(var n=e.char,s=n.name,a=n.description,r=n.thumbnail,c=n.homepage,t=n.wiki,i=n.comics,l=n.styles,h=[],d=0;d<i.length&&!(d>=9);d++)console.log(),h.push((0,o.jsx)("li",{className:"char__comics-item",children:(0,o.jsx)(f.rU,{to:"comics/".concat(i[d].resourceURI.slice(43)),children:i[d].name})},d+1));return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"char__basics",children:[(0,o.jsx)("img",{src:r,style:l,alt:s}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"char__info-name",children:s}),(0,o.jsxs)("div",{className:"char__btns",children:[(0,o.jsx)("a",{href:c,className:"button button__main",children:(0,o.jsx)("div",{className:"inner",children:"homepage"})}),(0,o.jsx)("a",{href:t,className:"button button__secondary",children:(0,o.jsx)("div",{className:"inner",children:"Wiki"})})]})]})]}),(0,o.jsx)("div",{className:"char__descr",children:a}),(0,o.jsx)("div",{className:"char__comics",children:"Comics:"}),(0,o.jsxs)("ul",{className:"char__comics-list",children:[i.length<=0?"There is not comics with this character":null,h]})]})},N=function(e){var n=(0,r.useState)(null),s=(0,a.Z)(n,2),c=s[0],h=s[1],d=(0,t.Z)(),u=d.loading,m=d.error,_=d.getCharacter,j=d.clearError;(0,r.useEffect)((function(){N()}),[]),(0,r.useEffect)((function(){N()}),[e.charId]);var f=function(e){h(e)},N=function(){var n=e.charId;n&&(j(),_(n).then(f))},p=c||u||m?null:(0,o.jsx)(x,{}),b=m?(0,o.jsx)(l.Z,{}):null,g=u?(0,o.jsx)(i.Z,{}):null,Z=u||m||!c?null:(0,o.jsx)(v,{char:c});return(0,o.jsxs)("div",{className:"char__info",children:[p,b,g,Z]})},p=s(5671),b=s(9466),g=s(136),Z=s(7277),k=function(e){(0,g.Z)(s,e);var n=(0,Z.Z)(s);function s(){var e;(0,p.Z)(this,s);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(e=n.call.apply(n,[this].concat(r))).state={error:!1},e}return(0,b.Z)(s,[{key:"componentDidCatch",value:function(e,n){console.log(e,n),this.setState({error:!0})}},{key:"render",value:function(){return this.state.error?(0,o.jsx)(l.Z,{}):this.props.children}}]),s}(r.Component),y=k,C=s(5705),S=s(132),w=function(e){e.props;var n=(0,t.Z)(),s=n.loading,c=n.error,l=n.getCharacterByName,h=n.clearError,d=(0,r.useState)(""),u=(0,a.Z)(d,2),m=u[0],_=u[1],j=(0,r.useState)(null),x=(0,a.Z)(j,2),v=x[0],N=x[1],p=null==v?null:(0,o.jsxs)("div",{className:"message",children:[0===v?(0,o.jsx)("div",{className:"error",children:"The character was not found. Check the name and try again"}):null,v?(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("div",{className:"success",children:["There is! Visit ",v.name," page?"]})}):null,c?(0,o.jsx)("div",{className:"error",children:"Something went wrong"}):null]});return(0,o.jsxs)("div",{className:"formik",children:[(0,o.jsx)(C.J9,{initialValues:{search:""},validationSchema:S.Ry({search:S.Z_().required("This field is required")}),onSubmit:function(e){e.search!==m&&l(e.search).then((function(n){!function(e,n){N(e),_(n)}(n,e.search)})).catch((function(){N(0)}))},children:(0,o.jsxs)(C.l0,{className:"char-form",children:[(0,o.jsx)("label",{className:"char-form__title",children:"Or find a character by name:"}),(0,o.jsx)(C.gN,{placeholder:"Enter name",className:"char-form__input",name:"search",type:"input",onInput:function(){return N(null),void h()}}),(0,o.jsxs)("div",{className:"char-form__btns",children:[(0,o.jsx)("button",{className:"char-form__btn",type:"submit",style:{backgroundColor:s?"#61121b":""},disabled:s,children:s?(0,o.jsx)(i.Z,{height:"70%"}):"Find"}),v?(0,o.jsx)(f.rU,{to:v.name,onFocus:function(e){return e.target.parentElement.classList.add("active")},onBlur:function(e){return e.target.parentElement.classList.remove("active")},className:"char-form__btn char-form__btn-gray",children:"Go To"}):""]}),(0,o.jsx)(C.Bc,{name:"search",component:"div",className:"error",styles:{gridArea:"error"}})]})}),p]})},E=s.p+"static/media/vision.067d4ae1936d64a577ce.png",F=function(){var e=(0,r.useState)(null),n=(0,a.Z)(e,2),s=n[0],t=n[1];return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(c.q,{children:[(0,o.jsx)("meta",{name:"description",content:"Marvel information portal"}),(0,o.jsx)("title",{children:"Marvel information portal"})]}),(0,o.jsx)(y,{children:(0,o.jsx)(d,{})}),(0,o.jsxs)("div",{className:"char__content",children:[(0,o.jsx)(y,{children:(0,o.jsx)(j,{onCharSelected:function(e){t(e)}})}),(0,o.jsx)(y,{children:(0,o.jsxs)("div",{children:[(0,o.jsx)(N,{charId:s}),(0,o.jsx)(w,{})]})})]}),(0,o.jsx)("img",{className:"bg-decoration",src:E,alt:"vision"})]})}}}]);
//# sourceMappingURL=666.6d49b2c9.chunk.js.map